\input{./../header/kib.tex}
\input{./../header/user.tex}  

% TODO ! напишите здесь название вашей лекции
\title{Лекция 1. Комбинаторика}
% TODO ! замените на дату проведения этой лекции. Например \date{14 апреля 2019}
\date{13.10.2023}
% \logo{\href{https://t.me/kibinfo}{\includegraphics[width=.05\textwidth]{./../pic/kib_logo.png}}}
\author{Слипенчук Павел Владимирович}
\institute{\centering \includegraphics[width=.2\textwidth]{./../pic/kib_logo.png} \\ Москва,\\ \href{https://t.me/kibinfo}{\textbf{КИБ}} }
% \titlegraphic{\href{https://t.me/kibinfo}{\includegraphics[width=.05\textwidth]{./../pic/kib_logo.png}}}

% TODO ! замените https://github.com/kib-courses/latex_templates на ссылку ВАШЕГО спецкурса!
\titlegraphic{\small \href{https://github.com/kib-courses/dsis-math-base}{Базовая математическая подготовка для Data Science}}

\begin{document}
  \maketitle
    
  \begin{frame}{План лекции}\label{frame:plan}
  	% TODO ! добавте в план все ваши секции, кроме "Вопросы для самопроверки", "Домашнее задание" и "Список материалов"
    \begin{enumerate}
	\item \nameref{section:why_combinatorics}
	\item \nameref{section:principles}
	\item \nameref{section:main_combinatorics_sxems}
	\item \nameref{section:binom}
	% \item \nameref{section:what_is_many}
	\item \nameref{section:graph}
	% \item \nameref{section:tkiz}
	% \item \nameref{section:another}
	\end{enumerate}
 \end{frame}
    
\section{Зачем нужна комбинаторика в DS}\label{section:why_combinatorics}
\begin{frame}
\termdef{Комбинаторный анализ (Комбинаторика)} — раздел математики, посвящённый 
решению задач выбора и расположения элементов некоторого, обычно конечного, множества
в соответствии с установленными правилами (схемами). 

Каждое такое правило определяет способ построения из элементов исходного множества некоторой конструкции, 
называемой \termdef{комбинаторной конфигурацией}. 
\end{frame}


\begin{frame}{Примеры задач комбинаторики}

\textbf{Простая задача.}
В школе танго 8 парней 
и 12 девушек.
Сколько существует всевозможных пар?

\begin{equation*}
8 \cdot 12 = 96
\end{equation*}

\textbf{Сложная задача.}
Сколько потребуется бит данных, 
чтобы сохранить всевозможные первые 20 ходов в шахматах?
\end{frame}


\begin{frame}{<<Задача о зёрнах на шахматной доске>>}
	
	\textbf{Когда очень много кажется малым...}
	
	Согласно индийской легенде, 
	брахман Сисса придумал шахматы (чатурангу).
	Правителю так понравилась игра, что он предложил Сиссе 
	выбрать себе награду.
	
	Хитрый Сисса попросил у правителя 
	на первую клетку положить одно зёрнышко пшеницы,
	на вторую два, 
	на третью четыре,
	на пятую восемь и так далее.
	
	Правитель, не разбиравшийся в комбинаторике,
	быстро согласился, даже несколько 
	обидевшись на столь "невысокую" цену.
	
	Однако неделю спустя 
	казначей доложил правителю что расплатиться невозможно,
	"разве что осушить моря и океаны и засеять всё пшеницей".
	
\end{frame}

\begin{frame}{<<Задача о зёрнах на шахматной доске>>}

\begin{equation*}
\begin{matrix}
C = 1 + 2 + 4 + 8 + 16 + ... + 2^{63} = \sum_{i=0}^{i=63} 2^i = 2^{64} - 1 = \\
= 18~446~744~073~709~551~615
\end{matrix}
\end{equation*}

Много или мало $2^{64}$ зёрен пшеницы ?

В 2021 году было произведено в мире 770 млн.тонн пшеницы.
Вес одного зерна примерно $50$ милиграмм.

\дз{Вопрос: сколько тысячелетий люди должны перестать есть хлеб, чтобы Сисса получил 
свою оплату?} :)

\end{frame}

\begin{frame}
Задач, аналогичной классической 
<<Задаче о зёрнах...>>
в сфере Data Science чрезвычайно много.

Одна из целей комбинаторики:
понимать что такое МНОГО, ОЧЕНЬ МНОГО.

Например:
\begin{enumerate}
	\item ~<<Давайте мониторить все видео на youtube с целью проверки на стеганографию!>>
	\item ~<<ChatGPT скоро научиться отвечать на все вопросы!>>
\end{enumerate}
 	
\end{frame}


\begin{frame}
	Road Map Data Science как мат.дисциплины \(кратко\)
	\begin{center}
		\begin{figure}
			\input{../pic/combinatorics_position.tkiz.tex}
			\caption{Место комбинаторики в DS}
		\end{figure}	
	\end{center}
	
\end{frame}

\section{Комбинаторные принципы}\label{section:principles}

\begin{frame}{Два основных правила}
\termdef{Правило суммы. (Правило <<ИЛИ>>)}
Если элемент $A$ можно выбрать $a$ способами,
а элемент $B$ можно выбрать $b$ способами,
то выбрать $A$ или $B$ 
можно $a+b$ способами.

\termdef{Правило умножения. (Правило <<И>>)}
Если элемент $A$ можно выбрать $a$ способами,
а элемент $B$ можно выбрать $b$ способами,
то пару $(A, B)$ 
можно выбрать $a \cdot b$ способами.

\end{frame}

\begin{frame}{Формула включения-исключения}

%\termdef{Формула включения-исключения}

Посчитаем мощность множества (количество элементов в множестве)
вида $\left| A \cup B \right|$

\begin{equation}
\left| A \cup B \right| = \left|  A \right| + \left|  B \right| - \left| A \cap B \right|
\end{equation}

%\begin{wrapfigure}{r}{2cm}
\centering
	\includegraphics[width=2cm]{../pic/A_intersect_B.svg.png}
%	\caption{Круги Эйлера для формулы включения-исключения}
%	\label{figure:pelican_1}
%\end{wrapfigure}

\end{frame}

\begin{frame}{Принцип Дирихле}
<<Если кролики рассажены в клетки и число кроликов больше числа клеток, то хотя бы в одной из клеток находится более одного кролика.>>

<<Если число клеток больше числа кроликов, то как минимум одна клетка пуста.>>
\end{frame}

\begin{frame}{Out of scope}

Ряд комбинаторных вещей мы не рассматриваем:
\begin{enumerate}
	\item биективное доказателство; 
	\item производящие функции;
	\item рекуррентные соотношения.
\end{enumerate}

\внекурса{Самостоятельно 
их освойте после прохождения DSIS направления.}
\end{frame}


\section{Основные комбинаторные схемы}\label{section:main_combinatorics_sxems}


\begin{frame}{Размещение (выборка без возвращения)}
Нужно из
$n$
различных элементов 
выбрать \textbf{упорядоченный}
ряд из $k$
элементов. 
Элементы берутся не более одного раза.

(Согласно принципу Дирихле, очевидно, что $k \leqslant n$,
иначе задача не имеет решения.)


Сколько существует таких способов?   

Пример.
Есть $n$ различных действий для атаки.
Сколько существует вариантов сделать атаку из $k$ действий?

\begin{equation}
A_n^k = n \cdot (n-1) \cdot (n-2) \cdot ... \cdot (n-k-1) = \frac{n!} {\left(n-k\right)!}
\end{equation}    

\вопрос{Как вывести эту формулу?}

\end{frame}

\begin{frame}


\дз{Докажите строго формулу:}
\begin{equation}
A_n^k = n \cdot (n-1) \cdot (n-2) \cdot ... \cdot \left(n-(k-1)\right)
\end{equation}  

Подсказка: используйте правило умножения, здравый смысл 
и метод математической индукции

\end{frame}



\begin{frame}{Перестановка}
\termdef{Перестановка} -- 
частный случай \term{размещения}, 
когда $n=k$ 

\begin{equation}
P_n = A_n^n
\end{equation}

Пример. Сколько существует способ в шифротексте из $n$ блоков переставить эти блоки?
\end{frame}


\begin{frame}{Размещение с повторением}
Нужно из
$n$
различных элементов 
выбрать \textbf{упорядоченный}
ряд из $k$
элементов. 
При этом элементы можно выбирать более одного раза.

\begin{equation}
\overline{A}_n^k = n ^ k
\end{equation} 
\дз{выведите эту формулу.}

\end{frame}

\begin{frame}{Сочетание}
	
Нужно из
$n$
различных элементов 
выбрать \textbf{не упорядоченный}
ряд из $k$
элементов. 
Элементы берутся не более одного раза.

\begin{equation}
C_n^k = \frac{n!}{\left( n-k\right)! k!}
\end{equation}

Давайте выведем эту формулу

...
\end{frame}

\begin{frame}{Сочетание}

$C_n^k$ это то же самое, 
что и $A_n^k$, за исключением того, что порядок НЕ важен.
Значит если  $C_n^k$ умножить на число перестановок $P_k$,
то согласно правилу умножения получим $A_n^k$

Значит:
\begin{equation*}
A_n^k = C_n^k \cdot P_k = C_n^k \cdot A_k^k
\end{equation*}
следовательно верно:
\begin{equation*}
C_n^k = \frac{A_n^k}{A_k^k}
\end{equation*}

Далее нужно расписать формулу. 
\дз{сделайте это дома.}

\end{frame}

\begin{frame}{Сочетание с повторением}
Нужно из
$n$
различных элементов 
выбрать \textbf{не упорядоченный}
ряд из $k$
элементов.
При этом элементы можно брать более одного раза.

\begin{equation}
\overline{C}_n^k = C_{n+k-1}^{n-1}
\end{equation}

\дз{Попробуйте доказать это самостоятельно, используя подсказку из методички Жуковых на стр.6}
Если не получиться -- на ближайшем очном занятии распишем.
	
\end{frame}

\begin{frame}{Out of scope}
	
Мы не рассматриваем числа стирлинга 1-го и 2-го родов.

\внекурса{Самостоятельно 
		их освойте после прохождения DSIS направления.}
\end{frame}

\section{Бином Ньютона}\label{section:binom}

\begin{frame}

Бином Ньютона:
\begin{equation}\label{eq:binom}
\left( x + y\right)^n = \sum_{k=0}^{k=n} C_n^k \cdot x^{n-k} \cdot y^{k}
\end{equation}

Доказательство
\begin{equation*}
\begin{matrix}
\left( x + y\right)^2 = x^2 + 2xy + y^2 = C_{2}^0 x^2 y^0 + C_{2}^{1} xy + C_{2}^{2}x^0y^2 \\
\left( x + y\right)^3 = x^3 + 3x^2y + 3xy^2 + y^3 = C_{3}^{0}x^3y^0 + C_{3}^{1}x^2y + C_{3}^{2}xy^2 + C_{3}^{3}x^0y^3  
\end{matrix}
\end{equation*}

\дз{дома самостоятельно распишите $\left( x + y\right)^4$ и $\left( x + y\right)^5$}

База индукции есть.

Предположим, что верно 
\begin{equation}\label{eq:binom_prev}
\left( x + y\right)^(n-1) = \sum_{k=0}^{k=n-1} C_{(n-1)}^k \cdot x^{n-1-k} \cdot y^{k}
\end{equation}
тогда нужно из формулы \eqref{eq:binom_prev}
вывести формулу \eqref{eq:binom}

\дз{сделайте это!}
\end{frame}

\begin{frame}
Бином Ньютона полезен для доказательства разных формул.	

Например подставим $x=1$ и $y=1$ в формулу \eqref{eq:binom}.
Получим:
\begin{equation}
\begin{matrix}
(1+1)^n = \sum_{k=0}^{k=n} C_n^k \cdot 1^{n-k} \cdot 1^{k} \\
2^n = \sum_{k=0}^{k=n} C_n^k
\end{matrix}
\end{equation}


\end{frame}


%\section{Вопросы для самопроверки}

% \begin{frame}
% TODO
% \end{frame}



\section{Введение в теорию графов}\label{section:graph}

\begin{frame}
Теория графов... 
очень общирная. 

И при этом достаточно простая 
с большим количеством 
качественных материалов.

Мы эту часть пройдём полностью заочно.
Наша цель -- получением минимальных навыков, чтобы 
<<убрать страх>> 
и в будущем достаточно быстро решать любые практические задачи из теории графов

Ниже -- темы для самостоятельного исследования.

На каждую часть нужно потратить 1-2, может быть 3 вечера, не более. 

Поиск материалов -- часть задания. 
(Если не находите удобный и понятный -- спрашивайте в чате)

По каждому пункту -- удобный ДЛЯ ВАС конспект от руки !


\end{frame}

\begin{frame}{Часть 1. Определения, классические задачи}
	
\begin{enumerate}
 \item Формальное математическое определение графа: $G=(V, E)$, $V$ -- множество вершин, $E$ -- множество рёбер.
 Ориентированный и неориентированный графы. Представление графа таблицей. Связный граф. Циклический и ациклический граф
 \item Дерево
 \item Двудольный граф
 \item Классическая <<задача о Кёненгсбергских мостах>>
 \item Классическая <<задача о четырёх красках>>
\end{enumerate}


\end{frame}

\begin{frame}{Простая задача на графы <<Кто пьёт воду и кто держит зебру?>>}

\tiny
На улице стоят пять домов, расположенные в ряд друг за другом. 

Каждый из пяти домов окрашен в свой цвет, их жители имеют различное гражданство, владеют разными животными, пьют разные напитки и майнят разные криптовалюты.

\begin{enumerate}
	\item Англичанин живёт в красном доме.
	\item У испанца есть собака.
	\item В зелёном доме пьют кофе.
	\item Украинец пьёт чай.
	\item Зелёный дом стоит сразу справа от белого дома.
	\item Тот, кто майнит Bitcoin, разводит улиток.
	\item В жёлтом доме майнят Ethereum.
	\item В центральном доме пьют молоко.
	\item Норвежец живёт в первом доме.
	\item Сосед того, кто майнит Stellar, держит лису.
	\item В доме по соседству с тем, в котором держат лошадь, майнят Ethereum.
	\item Тот, кто майнит IOTA, пьёт апельсиновый сок.
	\item Японец майнит Monero.
	\item Норвежец живёт рядом с синим домом.
\end{enumerate}

\textbf{Вопросы}
\begin{enumerate}
	\item Кто держит зебру?
	\item Кто пьёт воду?
\end{enumerate} 


\end{frame}


\begin{frame}{Часть 2. Графы как структуры данных}
	
\begin{enumerate}
  \item Двоичное дерево поиска (binary search tree, BST)
  \item Код Шенона-Фано; 
  \item Код Хаффмана.
  \item Алгоритм Дейкстры
\end{enumerate}



По просьбе трудящихся каждую эту тему можем рассмотреть отдельно. 
Собирайте инициативные группы, пишите в чат.


\end{frame}

\begin{frame}{Часть 3*. Практическое решение задачи Коммивояжёра}
	
	\begin{enumerate}
		\item P задачи, NP задачи и NP полные задачи
		\item Задача Коммивояжёра 
		\item Метод ветвей и границ
		\item \textbf{\href{https://habr.com/ru/articles/332208/}{Алгоритм Литтла}}
	\end{enumerate}
	

	
\end{frame}



\section{Домашняя работа}
\begin{frame}
	
	\small
	\begin{enumerate}
		\item заведите толстую тетрадь в клетку, удобную ручку и маркеры.
		\item прочитайте ещё раз лекцию. Перепишите формулы.
		\item задания, выделенные \дз{этим цветом} решите в тетради (ручкой по бумаге!). Если трудно, дождитесь результатов других ребят и спишите ПО УМНОМУ. Если не понятно -- напишите в личку тому. кто решил
		\item сфоткайте \ отсканируйте и выложите это в топик. Помогите 1-2 ребятам, кто к вам обратился. После -- перенаправте к тем, кому уже объяснили
		\item на вопросы для самопроверки ответьте усно. Там где нужно что-либо считать -- решите на бумаге, потом перенесите в тетрадь.
		\item всё что выходит за рамки курса выделено \внекурса{этим цветом.} В конце тетрадки сделайте главу OutOf Scope. И просто перепишите названия. Прочитайте в википедии О ЧЁМ это, чтобы просто иметь хоть какое-то представление. В будущем -- разберётесь более предметно.
	\end{enumerate}
	
	
\end{frame}

\begin{frame}{Задачки}
	Задачки желательно попробовать решить самому.
	Если не получается -- посмотреть у товарища, но ПРОРАБОТАТЬ
	их ВСЕ!
	
	Докажите \term{свойство симметрии} биномиальных коэфициентов, то есть:
	\begin{equation}
		C_{n}^{k} = C_{n}^{n-k}
	\end{equation}
	
	Докажите \term{рекурентное соотношение}:
	\begin{equation}
		C_{n}^{k} = C_{n-1}^{k-1} + C_{n-1}^{k}
	\end{equation}
	
	Если $n$ четное, то используя Бином Ньютона докажите:
	\begin{equation}\label{eq:binom_pears}
		C_n^{0} + C_n^{2} + C_n^{4} + C_n^{6} + ... + C_n^{n} = C_n^{1} + C_n^{3} + ... + C_n^{n-1}
	\end{equation}
	
	Если $n$ -- нечётное, то как измениться формула \eqref{eq:binom_pears}?
	
\end{frame}

\begin{frame}{Задачка (*) Свёртка Вандермонда}
	Опциональное ДЗ для особо продвинутых.
	
	Попробуйте доказать Свёртку Вандермонда:
	\begin{equation}
		\sum_{j=0}^{j=n} C_{n}^{j} C_{m}^{k-j} = C_{n+m}^{k}
	\end{equation}
	
\end{frame}

\section{Список материалов}

\begin{frame}

Методичка: <<Элементы комбинаторики>> (А.Е.Жуков, Д.А.Жуков, 2014)

Калкулятор биномиальных коэфициентов: \url{https://www.omnicalculator.com/math/binomial-coefficient}

Стандартная библиотека Python itertools: \url{https://docs.python.org/3/library/itertools.html}

\end{frame}

  
\end{document}